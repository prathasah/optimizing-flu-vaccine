# Parameter values for the costs
from PiecewiseAgeParameter import PiecewiseAgeNumber, PiecewiseAgeRate
import demography

import numpy


#:
#: +--------------------------------------------------+-----------------------+
#: | Case Hospitalization                             | Reference             |
#: +==================================================+=======================+
#: | 0.0141 (SD 0.0047) (Ages 0--4)                   | Molinari et al., 2007 |
#: +--------------------------------------------------+                       |
#: | 0.0006 (SD 0.0002) (Ages 5--17)                  |                       |
#: +--------------------------------------------------+                       |
#: | 0.0042 (SD 0.0014) (Ages 18--49)                 |                       |
#: +--------------------------------------------------+                       |
#: | 0.0193 (SD 0.0064) (Ages 50--64)                 |                       |
#: +--------------------------------------------------+                       |
#: | 0.0421 (SD 0.0140) (Ages 65+)                    |                       |
#: +--------------------------------------------------+-----------------------+
#: | 0.0245 (95% CI: 0.0110--0.0556) (Ages 0--4)      | Preanis et al., 2009  |
#: +--------------------------------------------------+                       |
#: | 0.0033 (95% CI: 0.0021--0.0063) (Ages 0--4)      |                       |
#: +--------------------------------------------------+                       |
#: | 0.0061 (95% CI: 0.0027--0.0134) (Ages 5--17)     |                       |
#: +--------------------------------------------------+                       |
#: | 0.0011 (95% CI: 0.0008--0.0018) (Ages 5--17)     |                       |
#: +--------------------------------------------------+                       |
#: | 0.0300 (95% CI: 0.0135--0.0592) (Ages 18--64)    |                       |
#: +--------------------------------------------------+                       |
#: | 0.0015 (95% CI: 0.0011--0.0025) (Ages 18--64)    |                       |
#: +--------------------------------------------------+                       |
#: | 0.0184 (95% CI: 0.0021--0.2538) (Ages 65+)       |                       |
#: +--------------------------------------------------+                       |
#: | 0.0016 (95% CI: 0.0010--0.0030) (Ages 65+)       |                       |
#: +--------------------------------------------------+-----------------------+
#:
caseHospitalizationPW = PiecewiseAgeRate(
    [numpy.random.triangular(0.0033, 0.0141, 0.0245),
     numpy.random.triangular(0.0006, 0.0011, 0.0061),
     numpy.random.triangular(0.0015, 0.0042, 0.0300),
     numpy.random.triangular(0.0015, 0.0193, 0.0300),
     numpy.random.triangular(0.0016, 0.0184, 0.0421)],
    [0, 5, 18, 50, 65])


#:
#: From Meltzer et al., 1999
highRiskRelativeCaseHospitalizationPW = PiecewiseAgeRate(
    [numpy.random.uniform(6.0, 21.4)
     / numpy.random.uniform(0.57, 6.9),
     numpy.random.uniform(6.9, 22.3)
     / numpy.random.uniform(1.5, 12.0),
     numpy.random.uniform(33.3, 68.4)
     / numpy.random.uniform(12.5, 15.8)],
    [0, 20, 65])



def contingentValue(ages):
    'From Cropper et al., 1994'
    omega = 2.6
    psi = 0.000104

    ages = numpy.asarray(ages)
    
    return (ages ** (omega - 1)) * numpy.exp(- psi * (ages ** omega))

# Contingent value
CVAges = demography.populationPW.ages
contingentValuePW = PiecewiseAgeNumber(contingentValue(CVAges),
                                       CVAges)


#: For years of life lost.
#: From US Life Tables 2006, NCHS, 2010.
expectationOfLifePW = PiecewiseAgeNumber(
    [77.7, 77.2, 76.3, 75.3, 74.3, 73.3, 72.3, 71.3, 70.4, 69.4,
     68.4, 67.4, 66.4, 65.4, 64.4, 63.4, 62.4, 61.5, 60.5, 59.6,
     58.6, 57.7, 56.7, 55.8, 54.8, 53.9, 53.0, 52.0, 51.1, 50.1,
     49.2, 48.2, 47.3, 46.3, 45.4, 44.4, 43.5, 42.5, 41.6, 40.7,
     39.7, 38.8, 37.9, 37.0, 36.1, 35.2, 34.3, 33.4, 32.5, 31.6,
     30.7, 29.9, 29.0, 28.2, 27.3, 26.5, 25.6, 24.8, 24.0, 23.2,
     22.4, 21.6, 20.8, 20.0, 19.2, 18.5, 17.8, 17.0, 16.3, 15.6,
     14.9, 14.2, 13.5, 12.8, 12.2, 11.6, 10.9, 10.4,  9.8,  9.2,
      8.7,  8.2,  7.7,  7.3,  6.8,  6.4,  6.0,  5.6,  5.2,  4.9,
      4.6,  4.3,  4.0,  3.7,  3.4,  3.2,  3.0,  2.8,  2.6,  2.4,
      2.3],
    [ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9,
     10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
     20, 21, 22, 23, 24, 25, 26, 27, 28, 29,
     30, 31, 32, 33, 34, 35, 36, 37, 38, 39,
     40, 41, 42, 43, 44, 45, 46, 47, 48, 49,
     50, 51, 52, 53, 54, 55, 56, 57, 58, 59,
     60, 61, 62, 63, 64, 65, 66, 67, 68, 69,
     70, 71, 72, 73, 74, 75, 76, 77, 78, 79,
     80, 81, 82, 83, 84, 85, 86, 87, 88, 89,
     90, 91, 92, 93, 94, 95, 96, 97, 98, 99,
    100])

#:.. todo::
#:   Include dollar cost.
dollarCost = None
