df2$vaccine_efficacy <- as.integer(df2$vaccine_efficacy)
dt2$vaccine_efficacy <- as.integer(dt2$vaccine_efficacy)
df2$vaccine_efficacy <- as.integer(df2$vaccine_efficacy)
str(df)
str(df2)
dt <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Incidence_5Jan2017_v101.csv")
dt <- subset(dt, dt$relative_coverage == 0.43)
dt$vaccine_efficacy <- as.numeric(dt$vaccine_efficacy *100)
dt$delta_typical_infections <-(no_vaccination_infection - dt$total_infections)/1000000
str(dt)
dt1 <-dt[,c(2,3,23)]
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_infections),
typical_se = sd(delta_typical_infections)/sqrt(1000)))
df1 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_1.csv", header=T)
df2 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_2.csv", header=T)
df3 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_3.csv", header=T)
df4 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_4.csv", header=T)
df5 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_5.csv", header=T)
df6 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_6.csv", header=T)
df7 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_7.csv", header=T)
df8 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_8.csv", header=T)
df <- rbind(df1,df2,df3,df4,df5,df6,df7,df8)
colnames(df)[3] <- "vaccine_efficacy"
df$vaccine_efficacy <- as.numeric(df$vaccine_efficacy*100)
df$delta_optimal_infections <- (no_vaccination_infection - df$objective)/1000000
dim(df)
df1 <- df[,c(3,4,57)]
df2 <- data.frame(df1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_infections),
optimal_se = sd(delta_optimal_infections)/sqrt(1000)))
str(df2)
str(df1)
library(ggplot2)
library(gridExtra)
library(grid)
library(plyr)
library(lattice)
library(reshape)
library(RColorBrewer)   # for brewer.pal(...)
library(cowplot)
library(Hmisc)
library(tidyr)
library('stringr')
library(dplyr)
b1 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Incidence_5Jan2017_v102.csv")
b2 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Mortality_5Jan2017_v102.csv")
b3 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Hospitalizations_5Jan2017_v102.csv")
b4 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/DALY_5Jan2017_v102.csv")
no_vaccination_infection <- mean(b1$total_infections)
no_vaccination_hospitalization  <- mean(b3$total_hospitalizations)
no_vaccination_death <- mean(b2$total_mortality)
no_vaccination_daly <- mean(b4$total_DALY)
dt <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Incidence_5Jan2017_v101.csv")
dt <- subset(dt, dt$relative_coverage == 0.43)
dt$vaccine_efficacy <- as.numeric(dt$vaccine_efficacy *100)
dt$delta_typical_infections <-(no_vaccination_infection - dt$total_infections)/1000000
str(dt)
dt1 <-dt[,c(2,3,23)]
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_infections),
typical_se = sd(delta_typical_infections)/sqrt(1000)))
df1 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_1.csv", header=T)
df2 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_2.csv", header=T)
df3 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_3.csv", header=T)
df4 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_4.csv", header=T)
df5 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_5.csv", header=T)
df6 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_6.csv", header=T)
df7 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_7.csv", header=T)
df8 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_8.csv", header=T)
df <- rbind(df1,df2,df3,df4,df5,df6,df7,df8)
colnames(df)[3] <- "vaccine_efficacy"
df$vaccine_efficacy <- as.numeric(df$vaccine_efficacy*100)
df$delta_optimal_infections <- (no_vaccination_infection - df$objective)/1000000
dim(df)
df1 <- df[,c(3,4,57)]
str(df1)
df2 <- data.frame(df1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_infections),
optimal_se = sd(delta_optimal_infections)/sqrt(1000)))
str(df2)
df2$vaccine_efficacy <- as.integer(df2$vaccine_efficacy)
dt2$vaccine_efficacy <- as.integer(dt2$vaccine_efficacy)
di <- merge(dt2,df2)
str(df2)
df2
df1
str(df1)
head(df1)
summary(df1$vaccine_efficacy)
summary(df1$factor(vaccine_efficacy))
summary(factor(df1$vaccine_efficacy)
)
df2 <- data.frame(df1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_infections),
optimal_se = sd(delta_optimal_infections)/sqrt(1000)))
str(df2)
df1$vaccine_efficacy <- factor(df1$vaccine_efficacy)
str(df1)
head(df1)
df2 <- data.frame(df1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_infections),
optimal_se = sd(delta_optimal_infections)/sqrt(1000)))
str(df2)
library(ggplot2)
library(gridExtra)
library(grid)
library(plyr)
library(lattice)
library(reshape)
library(RColorBrewer)   # for brewer.pal(...)
library(cowplot)
library(Hmisc)
library(tidyr)
library('stringr')
library(dplyr)
#############################################################################
b1 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Incidence_5Jan2017_v102.csv")
b2 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Mortality_5Jan2017_v102.csv")
b3 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Hospitalizations_5Jan2017_v102.csv")
b4 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/DALY_5Jan2017_v102.csv")
no_vaccination_infection <- mean(b1$total_infections)
no_vaccination_hospitalization  <- mean(b3$total_hospitalizations)
no_vaccination_death <- mean(b2$total_mortality)
no_vaccination_daly <- mean(b4$total_DALY)
################################################################
dt <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Incidence_5Jan2017_v101.csv")
dt <- subset(dt, dt$relative_coverage == 0.43)
dt$vaccine_efficacy <- as.numeric(dt$vaccine_efficacy *100)
dt$delta_typical_infections <-(no_vaccination_infection - dt$total_infections)/1000000
str(dt)
dt1 <-dt[,c(2,3,23)]
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_infections),
typical_se = sd(delta_typical_infections)/sqrt(1000)))
df1 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_1.csv", header=T)
df2 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_2.csv", header=T)
df3 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_3.csv", header=T)
df4 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_4.csv", header=T)
df5 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_5.csv", header=T)
df6 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_6.csv", header=T)
df7 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_7.csv", header=T)
df8 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_8.csv", header=T)
df <- rbind(df1,df2,df3,df4,df5,df6,df7,df8)
colnames(df)[3] <- "vaccine_efficacy"
df$vaccine_efficacy <- as.numeric(df$vaccine_efficacy*100)
df$delta_optimal_infections <- (no_vaccination_infection - df$objective)/1000000
dim(df)
df1 <- df[,c(3,4,57)]
df1$vaccine_efficacy <- factor(df1$vaccine_efficacy)
str(df1)
head(df1)
df2 <- data.frame(df1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_infections),
optimal_se = sd(delta_optimal_infections)/sqrt(1000)))
str(df2)
df2$vaccine_efficacy <- as.integer(df2$vaccine_efficacy)
dt2$vaccine_efficacy <- as.integer(dt2$vaccine_efficacy)
di <- merge(dt2,df2)
di$diff1 <- di$delta_optimal - di$delta_typical
di$diff2 <- (100*(di$delta_optimal - di$delta_typical)/ di$delta_typical)
di
da <- di[,c("vaccine_efficacy", "delta_typical", "typical_se")]
db <- di[,c("vaccine_efficacy", "delta_optimal", "optimal_se")]
colnames(da)[2] <- "delta_infections"
colnames(db)[2] <- "delta_infections"
colnames(da)[3] <- "se"
colnames(db)[3] <- "se"
da$type <- "Typical"
db$type <- "Optimized"
dat.i <- rbind(da,db)
dat.i$type <- factor(dat.i$type, levels = c("Typical", "Optimized"))
dat.i
################################################################
dt <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Hospitalizations_5Jan2017_v101.csv")
dt <- subset(dt, dt$relative_coverage == 0.43)
dt$vaccine_efficacy <- as.numeric(dt$vaccine_efficacy *100)
str(dt)
dt$delta_typical_hospitalizations <-(no_vaccination_hospitalization - dt$total_hospitalizations)/1000
dt1 <-dt[,c(2,3,22)]
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_hospitalizations),
typical_se = sd(delta_typical_hospitalizations)/sqrt(1000)))
df1 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v1.csv", header=T)
df2 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v2.csv", header=T)
df3 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v3.csv", header=T)
df4 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v4.csv", header=T)
df5 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v5.csv", header=T)
df6 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v6.csv", header=T)
df7 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v7.csv", header=T)
df8 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v8.csv", header=T)
df <- rbind(df1,df2,df3,df4,df5, df6,df7,df8)
colnames(df)[3] <- "vaccine_efficacy"
df$vaccine_efficacy <- as.numeric(df$vaccine_efficacy*100)
df$delta_optimal_hospitalizations <- (no_vaccination_hospitalization - df$objective)/1000
df1 <- df[,c(3,4,57)]
df2 <- data.frame(df1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_hospitalizations),
optimal_se = sd(delta_optimal_hospitalizations)/sqrt(1000)))
df2$vaccine_efficacy <- as.integer(df2$vaccine_efficacy)
dt2$vaccine_efficacy <- as.integer(dt2$vaccine_efficacy)
di <- merge(dt2,df2)
di$diff1 <- di$delta_optimal - di$delta_typical
di$diff2 <- (100*(di$delta_optimal - di$delta_typical)/ di$delta_typical)
di
da <- di[,c("vaccine_efficacy", "delta_typical", "typical_se")]
db <- di[,c("vaccine_efficacy", "delta_optimal", "optimal_se")]
colnames(da)[2] <- "delta_hospitalizations"
colnames(db)[2] <- "delta_hospitalizations"
colnames(da)[3] <- "se"
colnames(db)[3] <- "se"
da$type <- "Typical"
db$type <- "Optimized"
dat.h <- rbind(da,db)
dat.h$type <- factor(dat.h$type, levels = c("Typical", "Optimized"))
################################################################
dt <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Mortality_5Jan2017_v101.csv")
dt <- subset(dt, dt$relative_coverage == 0.43)
dt$vaccine_efficacy <- as.numeric(dt$vaccine_efficacy *100)
str(dt)
dt$delta_typical_deaths <-(no_vaccination_death - dt$total_mortality)/1000
dt1 <-dt[,c(2,3,22)]
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_deaths),
typical_se = sd(delta_typical_deaths)/sqrt(1000)))
df1 <- read.csv("../data/optimization_results/mortality/optimization_results_deaths_1000iter_1.csv", header=T)
df2 <- read.csv("../data/optimization_results/mortality/optimization_results_deaths_1000iter_2.csv", header=T)
df3 <- read.csv("../data/optimization_results/mortality/optimization_results_deaths_1000iter_3.csv", header=T)
df4 <- read.csv("../data/optimization_results/mortality/optimization_results_deaths_1000iter_4.csv", header=T)
df5 <- read.csv("../data/optimization_results/mortality/optimization_results_deaths_1000iter_5.csv", header=T)
df <- rbind(df1,df2,df3,df4,df5)
colnames(df)[3] <- "vaccine_efficacy"
df$vaccine_efficacy <- as.numeric(df$vaccine_efficacy*100)
df$delta_optimal_deaths <- (no_vaccination_death - df$objective)/1000
str(df)
df1 <- df[,c(3,4,57)]
str(df1)
df2 <- data.frame(df1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_deaths),
optimal_se = sd(delta_optimal_deaths)/sqrt(1000)))
df2$vaccine_efficacy <- as.integer(df2$vaccine_efficacy)
dt2$vaccine_efficacy <- as.integer(dt2$vaccine_efficacy)
di <- merge(dt2,df2)
di$diff1 <- di$delta_optimal - di$delta_typical
di$diff2 <- (100*(di$delta_optimal - di$delta_typical)/ di$delta_typical)
di
da <- di[,c("vaccine_efficacy", "delta_typical", "typical_se")]
db <- di[,c("vaccine_efficacy", "delta_optimal", "optimal_se")]
colnames(da)[2] <- "delta_deaths"
colnames(db)[2] <- "delta_deaths"
colnames(da)[3] <- "se"
colnames(db)[3] <- "se"
da$type <- "Typical"
db$type <- "Optimized"
dat.m <- rbind(da,db)
dat.m$type <- factor(dat.m$type, levels = c("Typical", "Optimized"))
dat.m
#########################################################################
dt <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/DALY_5Jan2017_v101.csv")
dt <- subset(dt, dt$relative_coverage == 0.43)
dt$vaccine_efficacy <- as.numeric(dt$vaccine_efficacy *100)
str(dt)
dt$delta_typical_dalys <- (no_vaccination_daly - dt$total_DALY)/1000000
dt1 <-dt[,c(2,3,22)]
str(dt1)
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_dalys),
typical_se = sd(delta_typical_dalys)/sqrt(1000)))
str(dt2)
df1 <- read.csv("../data/optimization_results/burden/optimization_results_burden_1000iter_check1.csv", header=T)
df2 <- read.csv("../data/optimization_results/burden/optimization_results_burden_1000iter_check2.csv", header=T)
df3 <- read.csv("../data/optimization_results/burden/optimization_results_burden_1000iter_check3.csv", header=T)
df4 <- read.csv("../data/optimization_results/burden/optimization_results_burden_1000iter_check4.csv", header=T)
df5 <- read.csv("../data/optimization_results/burden/optimization_results_burden_1000iter_check5.csv", header=T)
df6 <- read.csv("../data/optimization_results/burden/optimization_results_burden_1000iter_check6.csv", header=T)
df7 <- read.csv("../data/optimization_results/burden/optimization_results_burden_1000iter_check7.csv", header=T)
df8 <- read.csv("../data/optimization_results/burden/optimization_results_burden_1000iter_check8.csv", header=T)
df9 <- read.csv("../data/optimization_results/burden/optimization_results_burden_1000iter_check9.csv", header=T)
df10 <- read.csv("../data/optimization_results/burden/optimization_results_burden_1000iter_check10.csv", header=T)
df <- rbind(df1,df2,df3,df4,df5,df6,df7,df8,df8,df9,df10)
colnames(df)[3] <- "vaccine_efficacy"
df$vaccine_efficacy <- as.numeric(df$vaccine_efficacy*100)
df$delta_optimal_dalys <- (no_vaccination_daly - df$objective)/1000000
df1 <- df[,c(3,4,5,57)]
df2 <- data.frame(df1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_dalys),
optimal_se = sd(delta_optimal_dalys)/sqrt(1000)))
df2$vaccine_efficacy <- as.integer(df2$vaccine_efficacy)
dt2$vaccine_efficacy <- as.integer(dt2$vaccine_efficacy)
di <- merge(dt2,df2)
di$diff1 <- di$delta_optimal - di$delta_typical
di$diff2 <- (100*(di$delta_optimal - di$delta_typical)/ di$delta_typical)
da <- di[,c("vaccine_efficacy", "delta_typical", "typical_se")]
db <- di[,c("vaccine_efficacy", "delta_optimal", "optimal_se")]
colnames(da)[2] <- "delta_dalys"
colnames(db)[2] <- "delta_dalys"
colnames(da)[3] <- "se"
colnames(db)[3] <- "se"
da$type <- "Typical"
db$type <- "Optimized"
dat.d <- rbind(da,db)
dat.d$type <- factor(dat.d$type, levels = c("Typical", "Optimized"))
dat.d
#########################################################################
p1 <- ggplot(dat.i, aes(x=vaccine_efficacy, y=delta_infections, fill = type))+
geom_bar(position=position_dodge(),stat="identity",  color = "black", width = 8)+
geom_errorbar(aes(ymin = delta_infections -se,
ymax = delta_infections+se), width=0.5, position=position_dodge(9))+
scale_x_continuous(breaks=c(10, 20, 30, 40, 50, 60, 70, 80))+
scale_fill_manual(values=c("#8dd3c7", "#bebada"))+
ggtitle("A")+
theme(plot.title = element_text(hjust=-0.15))+
theme(legend.position = c(0.1,0.9), legend.title = element_blank())+
theme(axis.title.x=element_blank())+
ylab("Incidence averted (millions)")
p2 <- ggplot(dat.h, aes(x=vaccine_efficacy, y=delta_hospitalizations, fill=type))+
geom_bar(position="dodge",stat="identity",  color = "black", width = 8)+
geom_errorbar(aes(ymin = delta_hospitalizations -se, ymax = delta_hospitalizations+se),
width=0.5, position=position_dodge(9))+
scale_x_continuous(breaks=c(10, 20, 30, 40, 50, 60, 70, 80))+
ggtitle("B")+
theme(plot.title = element_text(hjust=-0.15))+
theme(axis.title.x=element_blank())+
guides(fill=FALSE)+
scale_fill_manual(values=c("#8dd3c7", "#bebada"))+
ylab("Hospitalizations averted (thousands)")
p3 <- ggplot(dat.m, aes(x=vaccine_efficacy, y=delta_deaths, fill=type))+
geom_bar(position="dodge",stat="identity",  color = "black", width = 8)+
geom_errorbar(aes(ymin = delta_deaths -se, ymax = delta_deaths + se),
width=0.5, position=position_dodge(9))+
scale_x_continuous(breaks=c(10, 20, 30, 40, 50, 60, 70, 80))+
ggtitle("C")+
theme(plot.title = element_text(hjust=-0.15))+
scale_fill_manual(values=c("#8dd3c7", "#bebada"))+
guides(fill=FALSE)+
theme(axis.title.x=element_blank())+
ylab("Deaths averted (thousands)")
str(dat.d)
p4 <- ggplot(dat.d, aes(x=vaccine_efficacy, y=delta_dalys, fill=type))+
geom_bar(position="dodge",stat="identity",  color = "black", width = 8)+
geom_errorbar(aes(ymin = delta_dalys -se, ymax = delta_dalys + se),
width=0.5, position=position_dodge(9))+
scale_x_continuous(breaks=c(10, 20, 30, 40, 50, 60, 70, 80))+
ggtitle("D")+
theme(plot.title = element_text(hjust=-0.15))+
scale_fill_manual(values=c("#8dd3c7", "#bebada"))+
guides(fill=FALSE)+
theme(axis.title.x=element_blank())+
ylab("DALYs averted (millions)")
p4
library(gridExtra)
p <- grid.arrange(p1,p2,p3,p4, nrow=2, ncol=2)
g <- arrangeGrob(p,  bottom=grid::textGrob("Vaccine efficacy (%)",gp = gpar(fontsize = 14)))
ggsave(filename="../plots/optimization_impact_population_level.png", plot=g, width = 7, height = 7)
ggsave(filename="../plots/optimization_impact_population_level.pdf", plot=g, width = 7, height = 7)
########################################################
b1 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Incidence_5Jan2017_v102.csv")
b2 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Mortality_5Jan2017_v102.csv")
b3 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Hospitalizations_5Jan2017_v102.csv")
b4 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/DALY_5Jan2017_v102.csv")
no_vaccination_infection <- mean(b1$total_infections)
no_vaccination_hospitalization  <- mean(b3$total_hospitalizations)
no_vaccination_death <- mean(b2$total_mortality)
no_vaccination_daly <- mean(b4$total_DALY)
###########################
########################################################
b1 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Incidence_5Jan2017_v102.csv")
b2 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Mortality_5Jan2017_v102.csv")
b3 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Hospitalizations_5Jan2017_v102.csv")
b4 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/DALY_5Jan2017_v102.csv")
no_vaccination_infection <- mean(b1$total_infections)
no_vaccination_hospitalization  <- mean(b3$total_hospitalizations)
no_vaccination_death <- mean(b2$total_mortality)
no_vaccination_daly <- mean(b4$total_DALY)
###########################
dt <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Incidence_5Jan2017_v101.csv")
dt <- subset(dt, dt$relative_coverage == 0.43)
dt$vaccine_efficacy <- as.numeric(dt$vaccine_efficacy *100)
dt$delta_typical_infections <-(no_vaccination_infection - dt$total_infections)/1000000
str(dt)
dt1 <-dt[,c(2,3,23)]
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_infections),
typical_se = sd(delta_typical_infections)/sqrt(1000)))
df1 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_1.csv", header=T)
df2 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_2.csv", header=T)
df3 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_3.csv", header=T)
df4 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_4.csv", header=T)
df5 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_5.csv", header=T)
df6 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_6.csv", header=T)
df7 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_7.csv", header=T)
df8 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_8.csv", header=T)
df <- rbind(df1,df2,df3,df4,df5,df6,df7,df8)
colnames(df)[3] <- "vaccine_efficacy"
df$vaccine_efficacy <- as.numeric(df$vaccine_efficacy*100)
df$delta_optimal_infections <- (no_vaccination_infection - df$objective)/1000000
dim(df)
df1 <- df[,c(3,4,57)]
df1$vaccine_efficacy <- factor(df1$vaccine_efficacy)
str(df1)
head(df1)
df2 <- data.frame(df1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_infections),
optimal_se = sd(delta_optimal_infections)/sqrt(1000)))
str(df2)
df2 <- data.frame(df1 %>% group_by(df1$vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_infections),
optimal_se = sd(delta_optimal_infections)/sqrt(1000)))
str(df2)
head(df1)
summary(factor(df1$vaccine_efficacy))
dt <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Hospitalizations_5Jan2017_v101.csv")
dt <- subset(dt, dt$relative_coverage == 0.43)
dt$vaccine_efficacy <- as.numeric(dt$vaccine_efficacy *100)
str(dt)
dt$delta_typical_hospitalizations <-(no_vaccination_hospitalization - dt$total_hospitalizations)/1000
dt1 <-dt[,c(2,3,22)]
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_hospitalizations),
typical_se = sd(delta_typical_hospitalizations)/sqrt(1000)))
df1 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v1.csv", header=T)
df2 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v2.csv", header=T)
df3 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v3.csv", header=T)
df4 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v4.csv", header=T)
dt <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Hospitalizations_5Jan2017_v101.csv")
dt <- subset(dt, dt$relative_coverage == 0.43)
dt$vaccine_efficacy <- as.numeric(dt$vaccine_efficacy *100)
str(dt)
dt$delta_typical_hospitalizations <-(no_vaccination_hospitalization - dt$total_hospitalizations)/1000
dt1 <-dt[,c(2,3,22)]
dim(dt)
dt1 <-dt[,c(2,3,23)]
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_hospitalizations),
typical_se = sd(delta_typical_hospitalizations)/sqrt(1000)))
df1 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v1.csv", header=T)
df2 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v2.csv", header=T)
df3 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v3.csv", header=T)
df4 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v4.csv", header=T)
df5 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v5.csv", header=T)
df6 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v6.csv", header=T)
df7 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v7.csv", header=T)
df8 <- read.csv("../data/optimization_results/hospitalization/optimization_results_hospitalizations_1000iter_v8.csv", header=T)
df <- rbind(df1,df2,df3,df4,df5, df6,df7,df8)
colnames(df)[3] <- "vaccine_efficacy"
df$vaccine_efficacy <- as.numeric(df$vaccine_efficacy*100)
df$delta_optimal_hospitalizations <- (no_vaccination_hospitalization - df$objective)/1000
df1 <- df[,c(3,4,57)]
df2 <- data.frame(df1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_hospitalizations),
optimal_se = sd(delta_optimal_hospitalizations)/sqrt(1000)))
df2$vaccine_efficacy <- as.integer(df2$vaccine_efficacy)
dt2
str(dt)
dt1 <-dt[,c(3,4,23)]
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_hospitalizations),
typical_se = sd(delta_typical_hospitalizations)/sqrt(1000)))
str(dt2)
str(dt1)
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_hospitalizations),
typical_se = sd(delta_typical_hospitalizations)/sqrt(1000)))
str(dt2)
b1 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Incidence_5Jan2017_v102.csv")
b2 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Mortality_5Jan2017_v102.csv")
b3 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Hospitalizations_5Jan2017_v102.csv")
b4 <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/DALY_5Jan2017_v102.csv")
no_vaccination_infection <- mean(b1$total_infections)
no_vaccination_hospitalization  <- mean(b3$total_hospitalizations)
no_vaccination_death <- mean(b2$total_mortality)
no_vaccination_daly <- mean(b4$total_DALY)
dt <- read.csv("../data/optimization_impact/3.1000_iter_5Jan2017/Incidence_5Jan2017_v101.csv")
dt <- subset(dt, dt$relative_coverage == 0.43)
dt$vaccine_efficacy <- as.numeric(dt$vaccine_efficacy *100)
dt$delta_typical_infections <-(no_vaccination_infection - dt$total_infections)/1000000
str(dt)
dt1 <-dt[,c(2,3,23)]
dt1 <-dt[,c(2,3,22)]
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_infections),
typical_se = sd(delta_typical_infections)/sqrt(1000)))
df1 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_1.csv", header=T)
df2 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_2.csv", header=T)
df3 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_3.csv", header=T)
df4 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_4.csv", header=T)
df5 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_5.csv", header=T)
df6 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_6.csv", header=T)
df7 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_7.csv", header=T)
df8 <- read.csv("../data/optimization_results/incidence/optimization_results_infections_1000iter_8.csv", header=T)
df <- rbind(df1,df2,df3,df4,df5,df6,df7,df8)
colnames(df)[3] <- "vaccine_efficacy"
df$vaccine_efficacy <- as.numeric(df$vaccine_efficacy*100)
df$delta_optimal_infections <- (no_vaccination_infection - df$objective)/1000000
dim(df)
str(df)
df1 <- df[,c(3,4,57)]
df1$vaccine_efficacy <- factor(df1$vaccine_efficacy)
str(df1)
head(df1)
summary(factor(df1$vaccine_efficacy))
df2 <- data.frame(df1 %>% group_by(df1$vaccine_efficacy) %>%
summarise(delta_optimal = mean(delta_optimal_infections),
optimal_se = sd(delta_optimal_infections)/sqrt(1000)))
str(df2)
str(dt2)
head(dt)
head(dt1)
dt2 <- data.frame(dt1 %>% group_by(vaccine_efficacy) %>%
summarise(delta_typical= mean(delta_typical_infections),
typical_se = sd(delta_typical_infections)/sqrt(1000)))
head(dt2)
